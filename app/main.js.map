{"version":3,"file":null,"sources":["/Users/normanpellet/Documents/Candlelight/code/app_public/source/main.js"],"sourcesContent":["const electron = require('electron');\nconst { Menu, ipcMain, dialog } = require('electron');\n// Module to control application life.\nconst app = electron.app;\n// Module to create native browser window.\nconst BrowserWindow = electron.BrowserWindow;\n\nconst path = require('path');\nconst url = require('url');\nconst fs = require('fs');\nconst request = require('request-promise-native');\nconst fix = require('fix-path');\nconst fetch = require('node-fetch');\nconst WebSocket = require('ws');\nconst environment = require('./environment.json');\nconst diagnostics = require('./app/scripts/diagnostics');\nconst { openForm, sendToForm } = require('./app/util/windows.js');\nfix();\n\nlet currentInstrument;\nconst { reportError } = require('../source/util/errorhandling');\n\nconst {\n  config,\n  saveConfig,\n  getPreference,\n  setPreference\n} = require('../source/util/config');\n\nlet windows = {};\n\nipcMain.on('addInstrument', addInstrument);\nipcMain.on('editInstrument', editInstrument);\nipcMain.on('removeInstrument', removeInstrument);\nipcMain.on('loadInstrument', loadInstrument);\n\nipcMain.on('editInfluxDB', editInfluxDB);\nipcMain.on('updateInfluxDB', updateInfluxDB);\nipcMain.on('downloadData', downloadData);\nipcMain.on('htmlReport', htmlReport);\n\nipcMain.on('configChannel', configChannel);\nipcMain.on('configChannels', configChannels);\nipcMain.on('mppt', openMPPT);\nipcMain.on('bugReport', openBugReport);\nipcMain.on('calibratePD', openCalibratePD);\nipcMain.on('calibratePyranometer', openCalibratePyranometer);\nipcMain.on('scheduleLight', openScheduleLight);\n\nipcMain.on('reportError', reportError);\n\nipcMain.on('get-config', (event, arg) => {\n  event.sender.send('get-config', config);\n});\n\nipcMain.on('set-preference', (event, arg) => {\n  setPreference(arg.name, arg.value);\n});\n\nipcMain.on('save-config', () => {\n  saveConfig();\n});\n\nfunction makeInstrumentMenu() {\n  return {\n    label: 'Instrument',\n    submenu: [\n      {\n        label: 'Diagnostics',\n        click() {\n          diagnostics.openDiagnostics(currentInstrument);\n        }\n      },\n      {\n        label: 'Add a new instrument',\n        click() {\n          addInstrument();\n        }\n      },\n      {\n        label: 'Edit instrument',\n        click() {\n          editInstrument(currentInstrument);\n        }\n      },\n      {\n        label: 'Edit database config',\n        click() {\n          editInfluxDB();\n        }\n      },\n      {\n        label: 'Show all measurements',\n        click() {\n          showAllMeasurements(currentInstrument);\n        }\n      },\n      { type: 'separator' },\n      { label: 'Cut', accelerator: 'CmdOrCtrl+X', selector: 'cut:' },\n      { label: 'Copy', accelerator: 'CmdOrCtrl+C', selector: 'copy:' },\n      { label: 'Paste', accelerator: 'CmdOrCtrl+V', selector: 'paste:' },\n\n      ...config.instruments.map(instrument => {\n        return {\n          label: instrument.trackerName,\n          checked: currentInstrument == instrument.trackerHost,\n          click(event) {\n            loadInstrument(event, instrument.trackerHost);\n          }\n        };\n      })\n    ]\n  };\n}\n\nfunction openSocket(instrumentConfig) {\n  const ws = new WebSocket(\n    'ws://' +\n      instrumentConfig.trackerHost +\n      ':' +\n      instrumentConfig.trackerPortWS\n  );\n\n  ws.on('open', function open() {\n    console.log('Socket is open');\n  });\n\n  ws.on('close', function open() {\n    console.log('Socket is closed');\n    setTimeout(() => openSocket(instrumentConfig), 1000);\n  });\n\n  ws.on('error', function error(err) {\n    console.log('Socket is in error state: ' + error.code);\n  });\n\n  ws.removeAllListeners('message');\n  ws.on('message', wsIncoming);\n\n  ws.isAlive = true;\n  ws.on('pong', () => (ws.isAlive = true));\n\n  var socketTimeout = () => {\n    let interval = setInterval(() => {\n      if (!ws.isAlive) {\n        ws.terminate();\n      }\n\n      if (ws.readyState == WebSocket.CLOSED) {\n        clearInterval(interval);\n      }\n\n      ws.isAlive = false;\n      ws.ping(() => {});\n    }, 30000);\n  };\n\n  socketTimeout();\n}\n\nfunction wsIncoming(data) {\n  data = JSON.parse(data);\n\n  if (!data.instrumentId && windows['instrumentMain']) {\n    windows['instrumentMain'].webContents.send(`instrument.log`, data.log);\n  }\n\n  if (data.instrumentId && windows['instrumentMain']) {\n    if (data.chanId) {\n      windows['instrumentMain'].webContents.send(\n        `channel.update.${data.instrumentId}.${data.chanId}`,\n        data\n      );\n    }\n\n    if (data.groupName) {\n      windows['instrumentMain'].webContents.send(\n        `group.update.${data.instrumentId}.${data.groupName}`,\n        data\n      );\n    }\n\n    if (data.log) {\n      data.log.time = Date.now();\n      windows['instrumentMain'].webContents.send(\n        `instrument.log.${data.instrumentId}`,\n        data.log\n      );\n    }\n  }\n}\n\nfunction doMenu() {\n  //require(\"./menu\");\n  const template = [];\n\n  if (environment.ageing) {\n    template.push(makeInstrumentMenu());\n  }\n\n  //if (process.platform === 'darwin') {\n  template.unshift({\n    label: app.getName(),\n    submenu: [\n      { role: 'about' },\n      { type: 'separator' },\n      { role: 'services', submenu: [] },\n      { type: 'separator' },\n      { role: 'hide' },\n      { role: 'hideothers' },\n      { role: 'unhide' },\n      { type: 'separator' },\n      { role: 'quit' }\n    ]\n  });\n\n  if (process.env.NODE_ENV == 'development') {\n    template[0].submenu.push({ role: 'toggledevtools' });\n  }\n  //}\n\n  const menu = Menu.buildFromTemplate(template);\n  Menu.setApplicationMenu(menu);\n}\n\n// Keep a global reference of the window object, if you don't, the window will\n// be closed automatically when the JavaScript object is garbage collected.\n\nfunction createMainWindow() {\n  // Create the browser window.\n  windows['instrumentList'] = new BrowserWindow({\n    width: 800,\n    height: 700,\n    resizable: false\n  });\n\n  windows['instrumentList'].webContents.once('dom-ready', () => {\n    windows['instrumentList'].webContents.send(\n      'dbInformation',\n      config.database\n    );\n  });\n\n  // and load the index.html of the app.\n  windows['instrumentList'].loadURL(\n    url.format({\n      pathname: path.join(__dirname, 'app/instrumentlist.html'),\n      protocol: 'file:',\n      slashes: true\n    })\n  );\n\n  // Open the DevTools.\n  // windows[ 'instrumentList' ].webContents.openDevTools()\n\n  // Emitted when the window is closed.\n  windows['instrumentList'].on('closed', function() {\n    // Dereference the window object, usually you would store windows\n    // in an array if your app supports multi windows, this is the time\n    // when you should delete the corresponding element.\n    windows['instrumentList'] = null;\n  });\n\n  doMenu();\n}\n\n// This method will be called when Electron has finished\n// initialization and is ready to create browser windows.\n// Some APIs can only be used after this event occurs.\napp.on('ready', createMainWindow);\n\n// Quit when all windows are closed.\napp.on('window-all-closed', function() {\n  // On OS X it is common for applications and their menu bar\n  // to stay active until the user quits explicitly with Cmd + Q\n  if (process.platform !== 'darwin') {\n    app.quit();\n  }\n});\n\napp.on('activate', function() {\n  // On OS X it's common to re-create a window in the app when the\n  // dock icon is clicked and there are no other windows open.\n  if (windows['instrumentList'] === null) {\n    createMainWindow();\n  }\n});\n\nasync function downloadData(\n  event,\n  tracker,\n  measurementName,\n  chanId,\n  instrumentId\n) {\n  let json = await fetch(\n    `http://${tracker.trackerHost}:${\n      tracker.trackerPort\n    }/getMeasurement?measurementName=${measurementName}`,\n    {\n      method: 'GET'\n    }\n  )\n    .then(response => response.json())\n    .catch(() => {\n      throw new Error(\n        `Error while connecting to the instrument. Check that you are online and that the instrument is available on your network.`\n      );\n    });\n\n  openForm(\n    null,\n    'downloadform',\n    {\n      measurementName: measurementName,\n      db: config.database,\n      cellInfo: json.cellInfo,\n      chanId: chanId,\n      instrumentId: instrumentId,\n      defaultPath: getPreference('defaultSavePath')\n    },\n    {\n      width: 850,\n      height: 800,\n      resizable: false\n    }\n  )\n    .then(async result => {\n      config.instruments.push(result);\n      await saveConfig();\n      reloadInstruments();\n    })\n    .catch(() => {});\n}\n\nfunction htmlReport(event, cellInfo, chanId, measurementName, instrumentId) {\n  let listenerConfig, listenerSavePDF /*, listenerPrintPDF*/;\n\n  ipcMain.on(\n    'htmlReport.config',\n    (listenerConfig = (event, data) => {\n      if (!windows['htmlReport']) {\n        return;\n      }\n\n      windows['htmlReport'].webContents.send('config', data);\n    })\n  );\n\n  ipcMain.on(\n    'htmlReport.savePDF',\n    (listenerSavePDF = (event, data) => {\n      if (!windows['htmlReport']) {\n        return;\n      }\n\n      dialog.showSaveDialog(\n        {\n          message: 'Save the report for device ' + data.cellName,\n          defaultPath:\n            (getPreference('defaultSavePathPDF') || '.') +\n            '/' +\n            data.cellName +\n            '.pdf'\n        },\n        fileName => {\n          if (!fileName) {\n            return;\n          }\n\n          const filePath = path.parse(fileName);\n          setPreference('defaultSavePathPDF', filePath.dir);\n\n          windows['htmlReport'].webContents.printToPDF(\n            {\n              marginsType: 1,\n              pageSize: 'A4',\n              landscape: true\n            },\n            (err, data) => {\n              fs.writeFile(fileName, data, error => {\n                console.log(err);\n              });\n            }\n          );\n        }\n      );\n\n      //windows[ \"htmlReport\"].webContents.send( \"savePDF\", data );\n    })\n  );\n\n  /*\n\n    ipcMain.on(\"htmlReport.printPDF\", ( listenerPrintPDF = ( event, data ) => {\n\n      if( ! windows[ 'htmlReport' ] ) {\n        return;\n      }\n\n        windows[ 'htmlReport' ].webContents.print( {\n          marginsType: 1,\n          pageSize: 'A4',\n          landscape: true\n        }, ( err, data ) => {\n\n          fs.writeFile( fileName, data, ( error ) => {\n            console.log( err );\n          } );\n        } );\n\n      //windows[ \"htmlReport\"].webContents.send( \"savePDF\", data );\n    } ) );\n*/\n  openForm(\n    null,\n    'htmlreport_control',\n    {\n      measurementName: measurementName,\n      db: config.database,\n      cellInfo: cellInfo,\n      chanId: chanId\n    },\n    {\n      width: 400,\n      height: 595,\n      x: 50,\n      y: 100,\n      center: false,\n      resizable: false\n    },\n    () => {\n      ipcMain.removeListener('htmlReport.config', listenerConfig);\n      ipcMain.removeListener('htmlReport.savePDF', listenerSavePDF);\n      //     ipcMain.removeListener( \"htmlReport.printPDF\", listenerPrintPDF );\n    }\n  );\n\n  windows['htmlReport'] = new BrowserWindow({\n    width: 1122,\n    height: 795,\n    x: 500,\n    y: 100,\n    center: false,\n    resizable: false\n  });\n\n  windows['htmlReport'].webContents.once('dom-ready', () => {\n    windows['htmlReport'].webContents.send('loadData', {\n      measurementName: measurementName,\n      db: config.database,\n      cellInfo: cellInfo,\n      chanId: chanId,\n      instrumentId: instrumentId\n    });\n  });\n  // and load the index.html of the app.\n  windows['htmlReport'].loadURL(\n    url.format({\n      pathname: path.join(__dirname, 'app/htmlreport.html'),\n      protocol: 'file:',\n      slashes: true\n    })\n  );\n}\n\nfunction openBugReport(event) {\n  openForm(\n    null,\n    'bugreport',\n    {},\n    {\n      width: 540,\n      height: 600,\n      resizable: false\n    }\n  );\n}\n\nfunction openMPPT(keithleyModel) {\n  windows['mppt'] = new BrowserWindow({\n    width: 1400,\n    height: 1024,\n    center: true,\n    resizable: false\n  });\n  // and load the index.html of the app.\n  windows['mppt'].loadURL(\n    url.format({\n      pathname: path.join(__dirname, 'app/mppt.html'),\n      protocol: 'file:',\n      slashes: true\n    })\n  );\n}\n\nasync function openCalibratePD(event, data) {\n  openForm(\n    null,\n    'calibratepd',\n    {\n      instrumentId: data.instrumentId,\n      groupName: data.groupName,\n      config: data.config\n    },\n    {\n      width: 800,\n      height: 600,\n      resizable: false\n    },\n    async () => {\n      var channelConfig = await fetch(\n        'http://' +\n          data.config.trackerHost +\n          ':' +\n          data.config.trackerPort +\n          '/resetAllChannels?instrumentId=' +\n          data.instrumentId +\n          '&groupName=' +\n          data.groupName,\n        { method: 'GET' }\n      ).then(response => response.json());\n    }\n  );\n}\n\nasync function openCalibratePyranometer(event, data) {\n  openForm(\n    null,\n    'calibratepyranometer',\n    {\n      instrumentId: data.instrumentId,\n      groupName: data.groupName,\n      config: data.config\n    },\n    {\n      width: 800,\n      height: 600,\n      resizable: false\n    },\n    async () => {\n      //var channelConfig = await fetch( \"http://\" + data.config.trackerHost + \":\" + data.config.trackerPort + \"/resetAllChannels?instrumentId=\" + data.instrumentId + \"&groupName=\" + data.groupName, { method: 'GET' } ).then( ( response ) => response.json() );\n    }\n  );\n}\n\nasync function openScheduleLight(event, data) {\n  //await fetch( \"http://\" + data.config.trackerHost + \":\" +   data.config.trackerPort + \"/light.pause?instrumentId=\" + data.instrumentId, { method: 'GET' } );\n\n  // Once the light has been updated, send the information to the main window for update\n  let listener;\n  ipcMain.on(\n    'light.updated',\n    (listener = () => {\n      windows['instrumentMain'].webContents.send('light.updated');\n    })\n  );\n\n  openForm(\n    null,\n    'scheduleLight',\n    {\n      instrumentId: data.instrumentId,\n      groupName: data.groupName,\n      config: data.config\n    },\n    {\n      width: 800,\n      height: 600,\n      resizable: false\n    },\n    function() {\n      // After the window is closed, remove the listener\n      ipcMain.removeListener('light.updated', listener);\n      //  await fetch( \"http://\" + data.config.trackerHost + \":\" + data.config.trackerPort + \"/light.resume?instrumentId=\" + data.instrumentId, { method: 'GET' } );\n    }\n  );\n}\n\n// In this file you can include the rest of your app's specific main process\n// code. You can also put them in separate files and require them here.\n\nfunction removeInstrument(event, trackerHost) {\n  dialog.showMessageBox(\n    {\n      type: 'question',\n      message: 'Are you sure that you want to remove this instrument ?',\n      cancelId: 0,\n      defaultId: 0,\n      title: 'Remove the instrument',\n      buttons: ['Cancel', 'Yes']\n    },\n    async index => {\n      if (index == 1) {\n        config.instruments.forEach((instrument, index) => {\n          if (instrument.trackerHost == trackerHost) {\n            config.instruments.splice(index, 1);\n          }\n        });\n\n        await saveConfig();\n        reloadInstruments();\n      }\n    }\n  );\n}\n\nfunction reloadInstruments() {\n  windows['instrumentList'].webContents.send('reloadInstruments');\n  doMenu();\n}\n\nfunction addInstrument() {\n  openForm(\n    null,\n    'instrumentform',\n    {},\n    {\n      width: 850,\n      height: 800,\n      resizable: false\n    }\n  )\n    .then(async result => {\n      try {\n        config.instruments.push(result);\n        await saveConfig();\n        reloadInstruments();\n      } catch (e) {\n        reportError(e);\n      }\n    })\n    .catch(() => {});\n}\n\nfunction loadInstrument(event, tracker) {\n  const trackerHost = tracker.host;\n  const mode = tracker.mode;\n\n  if (!windows['instrumentMain']) {\n    // Create the browser window.\n    windows['instrumentMain'] = new BrowserWindow({\n      width: 1400,\n      height: 1024,\n      center: true,\n      resizable: true\n    });\n  }\n\n  switch (mode) {\n    case 'ageing':\n      windows['instrumentMain'].loadURL(\n        url.format({\n          pathname: path.join(__dirname, 'app/instrument.html'),\n          protocol: 'file:',\n          slashes: true\n        })\n      );\n      break;\n\n    case 'measurement':\n      windows['instrumentMain'].loadURL(\n        url.format({\n          pathname: path.join(__dirname, 'app/ivmeasurements/index.html'),\n          protocol: 'file:',\n          slashes: true\n        })\n      );\n\n      break;\n  }\n\n  if (windows['instrumentList']) {\n    windows['instrumentList'].close();\n  }\n\n  let instrumentConfig;\n\n  config.instruments.forEach((instrument, index) => {\n    if (instrument.trackerHost == trackerHost) {\n      instrumentConfig = instrument;\n      currentInstrument = instrument;\n    }\n  });\n\n  // Global\n\n  if (windows['instrumentMain'].webContents.isLoading()) {\n    windows['instrumentMain'].webContents.once('dom-ready', () => {\n      windows['instrumentMain'].webContents.send('loadInstrument', {\n        tracker: instrumentConfig,\n        db: config.database\n      });\n    });\n  } else {\n    windows['instrumentMain'].webContents.send('loadInstrument', {\n      tracker: instrumentConfig,\n      db: config.database\n    });\n  }\n\n  windows['instrumentMain'].once('close', () => {\n    windows['instrumentMain'] = null;\n  });\n\n  doMenu();\n\n  openSocket(instrumentConfig);\n}\n\nfunction editInstrument(event, trackerHost) {\n  let data;\n\n  config.instruments.forEach((instrument, index) => {\n    if (instrument.trackerHost == trackerHost) {\n      data = instrument;\n    }\n  });\n\n  if (!data) {\n    throw 'Could not find the data corresponding to this instrument';\n  }\n\n  openForm(null, 'instrumentform', data, {\n    width: 600,\n    height: 800,\n    resizable: false\n  })\n    .then(async results => {\n      Object.assign(data, results);\n      await saveConfig();\n\n      if (windows['instrumentMain']) {\n        windows['instrumentMain'].webContents.send('loadInstrument', {\n          tracker: data,\n          db: config.database\n        });\n      }\n\n      if (windows['instrumentList']) {\n        windows['instrumentList'].webContents.send('instrumentUpdated');\n      }\n\n      reloadInstruments();\n    })\n    .catch(() => {});\n}\n\nfunction editInfluxDB(event) {\n  let data;\n  let influxConfig = config.database;\n\n  openForm(null, 'influxdbform', influxConfig, {\n    width: 600,\n    height: 700,\n    resizable: false\n  })\n    .then(async results => {\n      config.database = results;\n\n      await saveConfig();\n\n      sendToForm('uploading', {\n        status: 'progress',\n        host: config.instruments.map(i => i.trackerHost).join(', ')\n      });\n\n      updateInfluxDB()\n        .then(() => {\n          sendToForm('uploading', { status: 'done' });\n        })\n        .catch(err => {\n          sendToForm('uploading', {\n            status: 'error',\n            error: err,\n            host: err.options.host\n          });\n        });\n\n      if (windows['instrumentMain']) {\n        windows['instrumentMain'].webContents.send('reloadDB', {\n          db: config.database\n        });\n      }\n\n      if (windows['instrumentList']) {\n        windows['instrumentList'].webContents.send(\n          'dbInformation',\n          config.database\n        );\n      }\n    })\n    .catch(() => {});\n}\n\nfunction showAllMeasurements(instrument) {\n  console.log(instrument);\n  openForm(\n    null,\n    'showallmeasurements',\n    { config: instrument, configDB: config.database },\n    { width: 600, height: 700, resizable: false }\n  )\n    .then(results => {})\n    .catch(() => {});\n}\n\nfunction updateInfluxDB() {\n  return Promise.all(\n    config.instruments.map(instrument => {\n      return request.post({\n        url:\n          'http://' +\n          instrument.trackerHost +\n          ':' +\n          instrument.trackerPort +\n          '/setInfluxDB',\n        host: instrument.trackerHost,\n        form: config.database,\n        timeout: 1000\n      });\n    })\n  );\n}\n\nasync function configChannel(event, data) {\n  let influxConfig = config.database;\n\n  var channelConfig = await fetch(\n    'http://' +\n      data.trackerHost +\n      ':' +\n      data.trackerPort +\n      '/getChannelConfig?instrumentId=' +\n      data.instrumentId +\n      '&chanId=' +\n      data.chanId,\n    { method: 'GET' }\n  ).then(response => response.json());\n\n  var instrumentConfig = await fetch(\n    'http://' +\n      data.trackerHost +\n      ':' +\n      data.trackerPort +\n      '/getInstrumentConfig?instrumentId=' +\n      data.instrumentId,\n    { method: 'GET' }\n  ).then(response => response.json());\n\n  var channelState = await fetch(\n    'http://' +\n      data.trackerHost +\n      ':' +\n      data.trackerPort +\n      '/getStatus?instrumentId=' +\n      data.instrumentId +\n      '&chanId=' +\n      data.chanId,\n    { method: 'GET' }\n  ).then(response => response.json());\n\n  //var externalConnection = await fetch( \"http://\" + data.trackerHost + \":\" + data.trackerPort + \"/getChannelConfig?instrumentId=\" + data.instrumentId + \"&chanId=\" + data.chanId, { method: 'GET' } ).then( ( response ) => response.json() );\n  var externalConnection = false;\n\n  instrumentConfig.instrumentId = data.instrumentId;\n\n  return openForm(\n    null,\n    'cellform',\n    {\n      tracker: data,\n      instrumentConfig: instrumentConfig,\n      groupName: data.groupName,\n      channelConfig: channelConfig,\n      channelState: channelState[data.groupName].channels[data.chanId]\n    },\n    { width: 600, height: 800 }\n  )\n    .then(results => {\n      event.sender.send('channelConfigured', results);\n      return results;\n    })\n    .catch(() => {});\n}\n\nasync function configChannels(event, data) {\n  let influxConfig = config.database;\n\n  var channelsState = await fetch(\n    'http://' +\n      data.trackerHost +\n      ':' +\n      data.trackerPort +\n      '/getStatus?instrumentId=' +\n      data.instrumentId +\n      '&groupName=' +\n      data.groupName,\n    { method: 'GET' }\n  ).then(response => response.json());\n  var instrumentConfig = await fetch(\n    'http://' +\n      data.trackerHost +\n      ':' +\n      data.trackerPort +\n      '/getInstrumentConfig?instrumentId=' +\n      data.instrumentId,\n    { method: 'GET' }\n  ).then(response => response.json());\n  var channelState = await fetch(\n    'http://' +\n      data.trackerHost +\n      ':' +\n      data.trackerPort +\n      '/getStatus?instrumentId=' +\n      data.instrumentId +\n      '&chanId=' +\n      data.chanIds[0],\n    { method: 'GET' }\n  ).then(response => response.json());\n\n  instrumentConfig.instrumentId = data.instrumentId;\n\n  return openForm(\n    null,\n    'cellformall',\n    {\n      tracker: data,\n      channelState: channelState[data.groupName].channels[data.chanIds[0]],\n      channelsState: channelsState[data.groupName].channels,\n      groupName: data.groupName,\n      instrumentConfig: instrumentConfig,\n      channelIds: data.chanIds\n    },\n    { width: 600, height: 800 }\n  )\n    .then(results => {\n      event.sender.send('channelsConfigured', results);\n      return results;\n    })\n    .catch(() => {});\n}\n"],"names":["require","Menu","ipcMain","dialog","app","electron","BrowserWindow","path","url","fs","request","fix","fetch","WebSocket","environment","diagnostics","openForm","sendToForm","reportError","config","saveConfig","getPreference","setPreference","on","addInstrument","editInstrument","removeInstrument","loadInstrument","editInfluxDB","updateInfluxDB","downloadData","htmlReport","configChannel","configChannels","openMPPT","openBugReport","openCalibratePD","openCalibratePyranometer","openScheduleLight","event","sender","send","arg","name","value","label","submenu","click","openDiagnostics","currentInstrument","showAllMeasurements","type","accelerator","selector","instruments","map","instrument","trackerName","checked","trackerHost","instrumentConfig","trackerPortWS","ws","console","log","setTimeout","openSocket","error","code","removeAllListeners","wsIncoming","isAlive","setInterval","terminate","readyState","CLOSED","clearInterval","interval","ping","data","JSON","parse","instrumentId","windows","webContents","chanId","groupName","time","Date","now","ageing","template","push","makeInstrumentMenu","unshift","getName","role","buildFromTemplate","setApplicationMenu","menu","width","height","resizable","once","database","loadURL","format","pathname","join","__dirname","protocol","slashes","doMenu","createMainWindow","platform","quit","tracker","measurementName","trackerPort","method","then","response","json","catch","db","cellInfo","defaultPath","result","reloadInstruments","listenerSavePDF","listenerConfig","showSaveDialog","message","cellName","fileName","filePath","dir","printToPDF","marginsType","pageSize","landscape","err","writeFile","x","y","center","removeListener","listener","showMessageBox","cancelId","defaultId","title","buttons","forEach","index","splice","e","host","mode","close","isLoading","Object","assign","results","influxConfig","status","i","options","configDB","all","post","form","timeout","channelState","channelConfig","channels","chanIds","channelsState","channelIds"],"mappings":"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"}